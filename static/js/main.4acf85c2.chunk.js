(this.webpackJsonprnr=this.webpackJsonprnr||[]).push([[0],{15:function(t,e,s){},16:function(t,e,s){},18:function(t,e,s){"use strict";s.r(e);var a=s(3),c=s.n(a),i=s(10),r=s.n(i),n=(s(15),s(2)),o=s(1),u=s(5),l=s(6),b=s(4),h=s(8),j=s(7),m=(s(16),s(0)),d=function(t){Object(h.a)(s,t);var e=Object(j.a)(s);function s(){return Object(u.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"renderItems",value:function(){var t=this.props,e=t.items,s=t.rates;return 0===Object.keys(e).length?null:Object.keys(e).map((function(t){var a="+";return s[t]&&(a="(".concat(s[t].toFixed(2),")")),Object(m.jsxs)("li",{className:"pure-menu=item",children:[t,": ",e[t].toFixed(2)," ",!!s[t]&&a]},t)}))}},{key:"render",value:function(){return Object(m.jsx)("ul",{className:"pure-menu-list",children:this.renderItems()})}}]),s}(a.Component);var k=function(){return Object(m.jsxs)("div",{className:"pure-menu pure-menu-horizontal pure-menu-scrollable",children:[Object(m.jsx)("a",{href:"#",className:"pure-menu-link pure-menu-heading"}),Object(m.jsxs)("ul",{className:"pure-menu-list",children:[Object(m.jsx)("li",{className:"pure-menu-item",children:Object(m.jsx)("a",{href:"#",className:"pure-menu-link",children:"Scrapyard"})}),Object(m.jsx)("li",{className:"pure-menu-item",children:Object(m.jsx)("a",{href:"#",className:"pure-menu-link",children:"Science"})}),Object(m.jsx)("li",{className:"pure-menu-item",children:Object(m.jsx)("a",{href:"#",className:"pure-menu-link",children:"Workshop"})}),Object(m.jsx)("li",{className:"pure-menu-item",children:Object(m.jsx)("a",{href:"#",className:"pure-menu-link",children:"Arena"})}),Object(m.jsx)("li",{className:"pure-menu-item",children:Object(m.jsx)("a",{href:"#",className:"pure-menu-link",children:"Commerce"})}),Object(m.jsx)("li",{className:"pure-menu-item",children:Object(m.jsx)("a",{href:"#",className:"pure-menu-link",children:"Time"})}),Object(m.jsx)("li",{className:"pure-menu-item",children:Object(m.jsx)("a",{href:"#",className:"pure-menu-link",children:"Achievements"})}),Object(m.jsx)("li",{className:"pure-menu-item",children:Object(m.jsx)("a",{href:"#",className:"pure-menu-link",children:"Stats"})})]})]})},O=function(t){Object(h.a)(s,t);var e=Object(j.a)(s);function s(){return Object(u.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"renderJobs",value:function(){var t=this,e=this.props.robots;return 0===Object.keys(e).length?null:Object.keys(e).map((function(s){return Object(m.jsxs)("p",{children:[s," ",e[s],Object(m.jsx)("button",{className:"button-xsmall pure-button",onClick:function(){return t.props.addJob(s)},children:"+"}),Object(m.jsx)("button",{className:"pure-button button-xsmall",onClick:function(){return t.props.removeJob(s)},children:"-"})]},s)}))}},{key:"render",value:function(){var t=this.props.free;return Object(m.jsxs)("ul",{className:"pure-menu-list",children:[Object(m.jsxs)("h2",{children:["Robots ",t]}),this.renderJobs()]})}}]),s}(a.Component),p=function(t){Object(h.a)(s,t);var e=Object(j.a)(s);function s(t){var a;return Object(u.a)(this,s),(a=e.call(this,t)).state={time:0,resourceTypes:["heat","scrap","bricks","minerals","metals","parts","robots","matter","crystal"],buildingTypes:["kiln","scrapyard","quarry","brickworks","harvestor","smeltery","assembler","disintegrator","reactor"],robotTypes:["scavenger","engineer","metallurgist","technician"],crystalCooldownRate:0,itemStock:{},stockRate:{},stockLimit:{},buildings:{},robots:{scavenger:0,metallurgist:0,engineer:0,technician:0}},a.tick=a.tick.bind(Object(b.a)(a)),a.buildStructure=a.buildStructure.bind(Object(b.a)(a)),a.calculateRates=a.calculateRates.bind(Object(b.a)(a)),a.addJob=a.addJob.bind(Object(b.a)(a)),a.removeJob=a.removeJob.bind(Object(b.a)(a)),a.buildStructure=a.buildStructure.bind(Object(b.a)(a)),a.loadCookie=a.loadCookie.bind(Object(b.a)(a)),a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){setTimeout(this.tick,1e3)}},{key:"saveCookie",value:function(t){console.log("Saved!"),document.cookie="rnrData=".concat(btoa(JSON.stringify(t)))}},{key:"loadCookie",value:function(){var t=document.cookie.match("rnrData=[^&]+")[0];t&&(console.log(t),this.setState(Object(o.a)({},JSON.parse(atob(t.split("rnrData=")[1])))))}},{key:"tick",value:function(){var t=this,e=this.state,s=e.itemStock,a=e.crystalCooldownRate,c=this.state.stockRate;if(Object.keys(c).map((function(t){s[t]||(s[t]=0),s[t]+=c[t]})),Math.random()*this.state.buildings.quarry>=42+a){var i=s.crystal||0;s.crystal=i+1,a=100}else this.state.buildings.quarry>=42&&(a-=1)<1&&(a=0);(s.robots||0)<this.state.buildings.reactor&&s.parts>=5&&s.crystal>=1&&(s.parts-=5,s.crystal-=1,s.robots||(s.robots=0),s.robots+=1);var r={time:this.state?this.state.time+1:1,itemStock:s,crystalCooldownRate:a};this.state.autoSave&&r.time%5==0&&this.saveCookie(r),this.setState(r,(function(){return setTimeout(t.tick,1e3)}))}},{key:"incrStock",value:function(t,e){var s=this.state.itemStock[t]+e;s||0==s||(s=e),this.setState({itemStock:Object(o.a)(Object(o.a)({},this.state.itemStock),{},Object(n.a)({},t,s))})}},{key:"decrStock",value:function(t,e){var s=this.state.itemStock[t]-e;s||0==s||(s=-e),this.setState({itemStock:Object(o.a)(Object(o.a)({},this.state.itemStock),{},Object(n.a)({},t,s))})}},{key:"convertStock",value:function(t,e,s){var a,c=this.state.itemStock[t]-e||0,i=this.state.itemStock[s]+1||1;this.setState({itemStock:Object(o.a)(Object(o.a)({},this.state.itemStock),{},(a={},Object(n.a)(a,t,c),Object(n.a)(a,s,i),a))})}},{key:"onGenerateHeatButton",value:function(){this.incrStock("heat",1)}},{key:"calculateRates",value:function(){var t=this.state.itemStock.robots,e=this.state.buildings,s=e.kiln,a=e.scrapyard,c=e.harvestor,i=e.quarry,r=e.brickworks,n=e.smeltery,o=e.assembler,u=e.disintegrator,l=this.state.robots,b=l.scavenger,h=l.metallurgist,j=l.technician,m=l.engineer;this.setState({stockRate:{heat:.02*(t||0)+.68*(s||0)-.08*(a||0)-.05*(i||0)-.32*(r||0)-.75*(n||0)-1*(o||0)-2.5*(u||0),scrap:.24*(a||0)-.17*(n||0)-.13*(c||0)+.33*(u||0)+.25*(b||0),minerals:.05*(i||0)+.17*(c||0)-.09*(r||0)-.09*(n||0),bricks:.05*(r||0),metals:.09*(n||0)-1*(o||0)+.09*(h||0),parts:.03*(o||0)-.035*(u||0)+.03*(m||0),matter:.01*(u||0)+.01*(j||0)}})}},{key:"canBuild",value:function(t,e){return this.state.itemStock[t]&&this.state.itemStock[t]>=e}},{key:"buildStructure",value:function(t){var e=this.calculateBuildingCost(t),s=Object.keys(e)[0],a=Object.values(e)[0].toFixed(0);if(this.canBuild(s,a)){var c=this.state.buildings[t]||0;this.setState({itemStock:Object(o.a)(Object(o.a)({},this.state.itemStock),{},Object(n.a)({},s,this.state.itemStock[s]-a)),buildings:Object(o.a)(Object(o.a)({},this.state.buildings),{},Object(n.a)({},t,c+1))},this.calculateRates)}}},{key:"buildingLink",value:function(t){var e=this,s=this.calculateBuildingCost(t),a=Object.keys(s)[0],c=Object.values(s)[0].toFixed(0),i="pure-button button-small";return this.canBuild(a,c)||(i+=" button-error"),Object(m.jsx)("p",{children:Object(m.jsxs)("button",{className:i,onClick:function(){return e.buildStructure(t)},children:[t," ",this.state.buildings[t]," ",Object.keys(s)[0],":",Object.values(s)[0].toFixed(0)]})},t)}},{key:"totalWorking",value:function(){return Object.values(this.state.robots).reduce((function(t,e){return t+e}))}},{key:"addJob",value:function(t){if(Object.values(this.state.robots).reduce((function(t,e){return t+e}))<this.state.itemStock.robots){var e=this.state.robots[t]||0;this.setState({robots:Object(o.a)(Object(o.a)({},this.state.robots),{},Object(n.a)({},t,e+1))},this.calculateRates)}}},{key:"removeJob",value:function(t){var e=this.state.robots[t]||0;this.setState({robots:Object(o.a)(Object(o.a)({},this.state.robots),{},Object(n.a)({},t,Math.max(0,e-1)))},this.calculateRates)}},{key:"render",value:function(){var t=this;return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)("header",{className:"App-header",children:Object(m.jsxs)("div",{className:"pure-g",children:[Object(m.jsxs)("div",{className:"pure-u-1",children:[Object(m.jsx)("h1",{children:"Robots and Resources"}),Object(m.jsxs)("div",{className:"pure-g",children:[Object(m.jsx)("div",{className:"pure-u-4-5",children:Object(m.jsxs)("small",{children:["Day ",this.state.time]})}),Object(m.jsxs)("div",{className:"pure-u-1-5",children:[Object(m.jsx)("div",{children:Object(m.jsxs)("label",{htmlFor:"autosave",className:"pure-checkbox",children:[Object(m.jsx)("input",{id:"autosave",type:"checkbox",onClick:function(e){return t.setState({autoSave:e.target.checked})}}),"Autosave"]})}),Object(m.jsx)("button",{className:"button-xsmall pure-button",onClick:function(){return t.saveCookie(t.state)},children:"Save"}),Object(m.jsx)("button",{className:"button-xsmall pure-button",onClick:this.loadCookie,children:"Load"})]})]}),Object(m.jsx)(k,{})]}),Object(m.jsxs)("div",{className:"pure-u-1-3",children:[Object(m.jsx)("h2",{children:"Resources"}),Object(m.jsx)("p",{children:Object(m.jsx)("button",{className:"pure-button button-large",onClick:function(){return t.incrStock("heat",Math.random())},children:"Capture Heat"})}),Object(m.jsx)("p",{children:Object(m.jsx)("button",{className:"pure-button button-large",onClick:function(){return t.incrStock("scrap",Math.random())},children:"Salvage"})}),Object(m.jsx)(d,{items:this.state.itemStock,rates:this.state.stockRate})]}),Object(m.jsxs)("div",{className:"pure-u-1-3",children:[Object(m.jsx)("h2",{children:"Buildings"}),this.state.buildingTypes.map((function(e){return t.buildingLink(e)}))]}),Object(m.jsx)("div",{className:"pure-u-1-3",children:Object(m.jsx)(O,{addJob:this.addJob,removeJob:this.removeJob,robots:this.state.robots,free:this.state.itemStock.robots-this.totalWorking()||""})})]})})})}},{key:"calculateBuildingCost",value:function(t){var e=this.state.buildings[t]||0;switch(t){case"kiln":return{heat:19+Math.pow(20,4*e/100)};case"scrapyard":return{scrap:49+Math.pow(50,25*e/137)};case"quarry":return{heat:49+Math.pow(50,18*e/500)};case"brickworks":return{minerals:50+100*e};default:return{bricks:1+e}}}}]),s}(a.Component),v=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,19)).then((function(e){var s=e.getCLS,a=e.getFID,c=e.getFCP,i=e.getLCP,r=e.getTTFB;s(t),a(t),c(t),i(t),r(t)}))};r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(p,{})}),document.getElementById("root")),v()}},[[18,1,2]]]);
//# sourceMappingURL=main.4acf85c2.chunk.js.map