(this.webpackJsonprnr=this.webpackJsonprnr||[]).push([[0],{15:function(e,t,s){},16:function(e,t,s){},18:function(e,t,s){"use strict";s.r(t);var a=s(3),c=s.n(a),i=s(10),r=s.n(i),n=(s(15),s(2)),o=s(1),u=s(5),l=s(6),b=s(4),h=s(8),j=s(7),d=(s(16),s(0)),m=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){return Object(u.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"renderItems",value:function(){var e=this.props,t=e.items,s=e.rates;return 0===Object.keys(t).length?null:Object.keys(t).map((function(e){var a="+";return s[e]&&(a="(".concat(s[e].toFixed(2),")")),Object(d.jsxs)("li",{className:"pure-menu=item",children:[e,": ",t[e].toFixed(2)," ",!!s[e]&&a]},e)}))}},{key:"render",value:function(){return Object(d.jsx)("ul",{className:"pure-menu-list",children:this.renderItems()})}}]),s}(a.Component);var k=function(){return Object(d.jsxs)("div",{className:"pure-menu pure-menu-horizontal pure-menu-scrollable",children:[Object(d.jsx)("a",{href:"#",className:"pure-menu-link pure-menu-heading"}),Object(d.jsxs)("ul",{className:"pure-menu-list",children:[Object(d.jsx)("li",{className:"pure-menu-item",children:Object(d.jsx)("a",{href:"#",className:"pure-menu-link",children:"Scrapyard"})}),Object(d.jsx)("li",{className:"pure-menu-item",children:Object(d.jsx)("a",{href:"#",className:"pure-menu-link",children:"Science"})}),Object(d.jsx)("li",{className:"pure-menu-item",children:Object(d.jsx)("a",{href:"#",className:"pure-menu-link",children:"Workshop"})}),Object(d.jsx)("li",{className:"pure-menu-item",children:Object(d.jsx)("a",{href:"#",className:"pure-menu-link",children:"Arena"})}),Object(d.jsx)("li",{className:"pure-menu-item",children:Object(d.jsx)("a",{href:"#",className:"pure-menu-link",children:"Commerce"})}),Object(d.jsx)("li",{className:"pure-menu-item",children:Object(d.jsx)("a",{href:"#",className:"pure-menu-link",children:"Time"})}),Object(d.jsx)("li",{className:"pure-menu-item",children:Object(d.jsx)("a",{href:"#",className:"pure-menu-link",children:"Achievements"})}),Object(d.jsx)("li",{className:"pure-menu-item",children:Object(d.jsx)("a",{href:"#",className:"pure-menu-link",children:"Stats"})})]})]})},O=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(){return Object(u.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"renderJobs",value:function(){var e=this,t=this.props.robots;return 0===Object.keys(t).length?null:Object.keys(t).map((function(s){return Object(d.jsxs)("p",{children:[s," ",t[s],Object(d.jsx)("button",{onClick:function(){return e.props.addJob(s)},children:"+"}),Object(d.jsx)("button",{onClick:function(){return e.props.removeJob(s)},children:"-"})]},s)}))}},{key:"render",value:function(){var e=this.props.free;return Object(d.jsxs)("ul",{className:"pure-menu-list",children:[Object(d.jsxs)("h2",{children:["Robots ",e]}),this.renderJobs()]})}}]),s}(a.Component),p=function(e){Object(h.a)(s,e);var t=Object(j.a)(s);function s(e){var a;return Object(u.a)(this,s),(a=t.call(this,e)).state={time:0,resourceTypes:["heat","scrap","bricks","minerals","metals","parts","robots","matter","crystal"],buildingTypes:["kiln","scrapyard","quarry","brickworks","harvestor","smeltery","assembler","disintegrator","reactor"],robotTypes:["scavenger","engineer","metallurgist","technician"],crystalCooldownRate:0,itemStock:{},stockRate:{},stockLimit:{},buildings:{},robots:{scavenger:0,metallurgist:0,engineer:0,technician:0}},a.tick=a.tick.bind(Object(b.a)(a)),a.buildStructure=a.buildStructure.bind(Object(b.a)(a)),a.calculateRates=a.calculateRates.bind(Object(b.a)(a)),a.addJob=a.addJob.bind(Object(b.a)(a)),a.removeJob=a.removeJob.bind(Object(b.a)(a)),a.buildStructure=a.buildStructure.bind(Object(b.a)(a)),a.loadCookie=a.loadCookie.bind(Object(b.a)(a)),a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){setTimeout(this.tick,1e3)}},{key:"saveCookie",value:function(e){console.log("Saved!"),document.cookie="rnrData=".concat(btoa(JSON.stringify(e)))}},{key:"loadCookie",value:function(){var e=document.cookie.match("rnrData=[^&]+")[0];e&&(console.log(e),this.setState(Object(o.a)({},JSON.parse(atob(e.split("rnrData=")[1])))))}},{key:"tick",value:function(){var e=this,t=this.state,s=t.itemStock,a=t.crystalCooldownRate,c=this.state.stockRate;if(Object.keys(c).map((function(e){s[e]||(s[e]=0),s[e]+=c[e]})),Math.random()*this.state.buildings.quarry>=42+a){var i=s.crystal||0;s.crystal=i+1,a=100}else this.state.buildings.quarry>=42&&(a-=1)<1&&(a=0);(s.robots||0)<this.state.buildings.reactor&&s.parts>=5&&s.crystal>=1&&(s.parts-=5,s.crystal-=1,s.robots||(s.robots=0),s.robots+=1);var r={time:this.state?this.state.time+1:1,itemStock:s,crystalCooldownRate:a};this.state.autoSave&&r.time%5==0&&this.saveCookie(r),this.setState(r,(function(){return setTimeout(e.tick,1e3)}))}},{key:"incrStock",value:function(e,t){var s=this.state.itemStock[e]+t;s||0==s||(s=t),this.setState({itemStock:Object(o.a)(Object(o.a)({},this.state.itemStock),{},Object(n.a)({},e,s))})}},{key:"decrStock",value:function(e,t){var s=this.state.itemStock[e]-t;s||0==s||(s=-t),this.setState({itemStock:Object(o.a)(Object(o.a)({},this.state.itemStock),{},Object(n.a)({},e,s))})}},{key:"convertStock",value:function(e,t,s){var a,c=this.state.itemStock[e]-t||0,i=this.state.itemStock[s]+1||1;this.setState({itemStock:Object(o.a)(Object(o.a)({},this.state.itemStock),{},(a={},Object(n.a)(a,e,c),Object(n.a)(a,s,i),a))})}},{key:"onGenerateHeatButton",value:function(){this.incrStock("heat",1)}},{key:"calculateRates",value:function(){var e=this.state.itemStock.robots,t=this.state.buildings,s=t.kiln,a=t.scrapyard,c=t.harvestor,i=t.quarry,r=t.brickworks,n=t.smeltery,o=t.assembler,u=t.disintegrator,l=this.state.robots,b=l.scavenger,h=l.metallurgist,j=l.technician,d=l.engineer;this.setState({stockRate:{heat:.02*(e||0)+.68*(s||0)-.08*(a||0)-.05*(i||0)-.32*(r||0)-.75*(n||0)-1*(o||0)-2.5*(u||0),scrap:.24*(a||0)-.17*(n||0)-.13*(c||0)+.33*(u||0)+.25*(b||0),minerals:.05*(i||0)+.17*(c||0)-.09*(r||0)-.09*(n||0),bricks:.05*(r||0),metals:.09*(n||0)-1*(o||0)+.09*(h||0),parts:.03*(o||0)-.035*(u||0)+.03*(d||0),matter:.01*(u||0)+.01*(j||0)}})}},{key:"buildStructure",value:function(e){var t=this.calculateBuildingCost(e),s=Object.keys(t)[0],a=Object.values(t)[0].toFixed(0);if(this.state.itemStock[s]&&this.state.itemStock[s]>=a){var c=this.state.buildings[e]||0;this.setState({itemStock:Object(o.a)(Object(o.a)({},this.state.itemStock),{},Object(n.a)({},s,this.state.itemStock[s]-a)),buildings:Object(o.a)(Object(o.a)({},this.state.buildings),{},Object(n.a)({},e,c+1))},this.calculateRates)}}},{key:"buildingLink",value:function(e){var t=this,s=this.calculateBuildingCost(e);return Object(d.jsx)("p",{children:Object(d.jsxs)("button",{onClick:function(){return t.buildStructure(e)},children:[e," ",this.state.buildings[e]," ",Object.keys(s)[0],":",Object.values(s)[0].toFixed(0)]})},e)}},{key:"totalWorking",value:function(){return Object.values(this.state.robots).reduce((function(e,t){return e+t}))}},{key:"addJob",value:function(e){if(Object.values(this.state.robots).reduce((function(e,t){return e+t}))<this.state.itemStock.robots){var t=this.state.robots[e]||0;this.setState({robots:Object(o.a)(Object(o.a)({},this.state.robots),{},Object(n.a)({},e,t+1))},this.calculateRates)}}},{key:"removeJob",value:function(e){var t=this.state.robots[e]||0;this.setState({robots:Object(o.a)(Object(o.a)({},this.state.robots),{},Object(n.a)({},e,Math.max(0,t-1)))},this.calculateRates)}},{key:"render",value:function(){var e=this;return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)("header",{className:"App-header",children:Object(d.jsxs)("div",{className:"pure-g",children:[Object(d.jsxs)("div",{className:"pure-u-1",children:[Object(d.jsx)("h1",{children:"Robots and Resources"}),Object(d.jsxs)("div",{className:"pure-g",children:[Object(d.jsx)("div",{className:"pure-u-4-5",children:Object(d.jsxs)("small",{children:["Day ",this.state.time]})}),Object(d.jsx)("div",{className:"pure-u-1-5",children:Object(d.jsxs)("fieldset",{children:[Object(d.jsx)("button",{onClick:function(){return e.saveCookie(e.state)},children:"Save"}),Object(d.jsx)("button",{onClick:this.loadCookie,children:"Load"}),Object(d.jsxs)("label",{htmlFor:"autosave",className:"pure-checkbox",children:[Object(d.jsx)("input",{ref:"save",id:"autosave",type:"checkbox",onClick:function(t){return e.setState({autoSave:t.target.checked})}}),"Autosave"]})]})})]}),Object(d.jsx)(k,{})]}),Object(d.jsxs)("div",{className:"pure-u-1-3",children:[Object(d.jsx)("h2",{children:"Resources"}),Object(d.jsx)("p",{children:Object(d.jsx)("button",{onClick:function(){return e.incrStock("heat",Math.random())},children:"Capture Heat"})}),Object(d.jsx)("p",{children:Object(d.jsx)("button",{onClick:function(){return e.incrStock("scrap",Math.random())},children:"Salvage"})}),Object(d.jsx)(m,{items:this.state.itemStock,rates:this.state.stockRate})]}),Object(d.jsxs)("div",{className:"pure-u-1-3",children:[Object(d.jsx)("h2",{children:"Buildings"}),this.state.buildingTypes.map((function(t){return e.buildingLink(t)}))]}),Object(d.jsx)("div",{className:"pure-u-1-3",children:Object(d.jsx)(O,{addJob:this.addJob,removeJob:this.removeJob,robots:this.state.robots,free:this.state.itemStock.robots-this.totalWorking()||""})})]})})})}},{key:"calculateBuildingCost",value:function(e){var t=this.state.buildings[e]||0;switch(e){case"kiln":return{heat:19+Math.pow(20,4*t/100)};case"scrapyard":return{scrap:49+Math.pow(50,25*t/137)};case"quarry":return{heat:49+Math.pow(50,18*t/500)};case"brickworks":return{minerals:50+100*t};default:return{bricks:1+t}}}}]),s}(a.Component),v=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,19)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;s(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(p,{})}),document.getElementById("root")),v()}},[[18,1,2]]]);
//# sourceMappingURL=main.e21e9c47.chunk.js.map